<!DOCTY "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="application/xht />
<title>ZZPRM_004</title>
</head>
<body>
<table class="outerTable">
  <tr class="normalBoldLarge">
     <td><h2>Code listing for: ZZPRM_004</h2>
<h3> Description: </h3></td>
   </tr>
  <tr>
     <td>
     <table class="innerTable">
       <tr>
          <td>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Report&nbsp;ZZPRM_004<br />
*&---------------------------------------------------------------------*<br />
*&<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
report zzprm_004.<br />
<br />
include <a href ="zzprm_004_top.html">zzprm_004_top</a>.<br />
include <a href ="zzprm_004_frm.html">zzprm_004_frm</a>.<br />
<br />
<br />
START-OF-SELECTION.<br />
<br />
perform get_data.<br />
perform set_fc.<br />
perform set_layout.<br />
perform display_alv.<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
   </div>
   <div class="codeComment">
*TABLES&nbsp;sscrfields.<br />
*TYPE-POOLS&nbsp;SLIS&nbsp;.<br />
*data&nbsp;:&nbsp;gt_izinler&nbsp;type&nbsp;table&nbsp;of&nbsp;zzprm_t003,<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;go_salv&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;ref&nbsp;to&nbsp;cl_salv_table.<br />
*DATA&nbsp;:&nbsp;IT_FCAT&nbsp;TYPE&nbsp;SLIS_T_FIELDCAT_ALV&nbsp;.<br />
*DATA&nbsp;:&nbsp;WA_FCAT&nbsp;LIKE&nbsp;LINE&nbsp;OF&nbsp;IT_FCAT&nbsp;.<br />
*start-of-selection.<br />
*select&nbsp;*&nbsp;from&nbsp;zzprm_t003&nbsp;into&nbsp;table&nbsp;gt_izinler.<br />
*<br />
*&nbsp;&nbsp;cl_salv_table=&gt;factory(<br />
*&nbsp;&nbsp;&nbsp;&nbsp;importing<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r_salv_table&nbsp;&nbsp;&nbsp;=&nbsp;go_salv<br />
*&nbsp;&nbsp;&nbsp;&nbsp;changing<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t_table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;gt_izinler<br />
*&nbsp;&nbsp;).<br />
*<br />
*go_salv-&gt;display(&nbsp;).<br />
<br />
*END-OF-SELECTION&nbsp;.<br />
*&nbsp;&nbsp;PERFORM&nbsp;DISP_ALV&nbsp;.<br />
*<br />
*&nbsp;&nbsp;FORM&nbsp;DISP_ALV&nbsp;.<br />
**PERFORM&nbsp;user_command.<br />
*&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'REUSE_ALV_GRID_DISPLAY'<br />
*&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I_CALLBACK_PROGRAM&nbsp;=&nbsp;SY-REPID<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i_callback_pf_status_set&nbsp;=&nbsp;'SUB_PF_STATUS'<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i_callback_user_command&nbsp;=&nbsp;'USER_COMMAND'<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IT_FIELDCAT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;IT_FCAT&nbsp;"PASS&nbsp;FIELD&nbsp;CATALOG&nbsp;TO&nbsp;ALV<br />
*&nbsp;&nbsp;&nbsp;&nbsp;TABLES<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T_OUTTAB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;gt_izinler.<br />
*<br />
*<br />
*ENDFORM.<br />
*<br />
*form&nbsp;sub_pf_status&nbsp;using&nbsp;rt_extab&nbsp;type&nbsp;slis_t_extab.<br />
*&nbsp;&nbsp;set&nbsp;PF-STATUS&nbsp;'ZSTANDARD'.<br />
*&nbsp;&nbsp;endform.<br />
<br />
<br />
<br />
<br />
<br />
*form&nbsp;user_command&nbsp;using<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r_ucomm&nbsp;like&nbsp;sy-ucomm<br />
*&nbsp;&nbsp;rs_selfield&nbsp;type&nbsp;slis_selfield.<br />
*&nbsp;&nbsp;data&nbsp;lv_mes&nbsp;type&nbsp;char200.<br />
*&nbsp;&nbsp;if&nbsp;r_ucomm&nbsp;eq&nbsp;'&ZZZ'.<br />
*&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'Deneme&nbsp;butonuna&nbsp;týklandý'&nbsp;type&nbsp;'S'.<br />
*&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
*ENDFORM.<br />
<br />
*TYPE-POOLS&nbsp;SLIS&nbsp;.<br />
*<br />
*DATA&nbsp;:&nbsp;IT_MARA&nbsp;TYPE&nbsp;&nbsp;zzprm_t003.<br />
*DATA&nbsp;:&nbsp;WA_MARA&nbsp;TYPE&nbsp;zzprm_t003&nbsp;.<br />
*<br />
*DATA&nbsp;:&nbsp;IT_FCAT&nbsp;TYPE&nbsp;SLIS_T_FIELDCAT_ALV&nbsp;.<br />
*DATA&nbsp;:&nbsp;WA_FCAT&nbsp;LIKE&nbsp;LINE&nbsp;OF&nbsp;IT_FCAT&nbsp;.<br />
*SELECT-OPTIONS:&nbsp;S_MATNR&nbsp;FOR&nbsp;IT_MARA-permformno.<br />
*<br />
*START-OF-SELECTION&nbsp;.<br />
*&nbsp;&nbsp;PERFORM&nbsp;GET_DATA&nbsp;.<br />
*<br />
*<br />
*END-OF-SELECTION&nbsp;.<br />
*&nbsp;&nbsp;PERFORM&nbsp;DISP_ALV&nbsp;.<br />
*<br />
**&---------------------------------------------------------------------*<br />
**&&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Form&nbsp;&nbsp;GET_DATA<br />
**&---------------------------------------------------------------------*<br />
**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text<br />
**----------------------------------------------------------------------*<br />
**&nbsp;&nbsp;--&gt;&nbsp;&nbsp;p1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text<br />
**&nbsp;&nbsp;&lt;--&nbsp;&nbsp;p2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text<br />
**----------------------------------------------------------------------*<br />
*FORM&nbsp;GET_DATA&nbsp;.<br />
*&nbsp;&nbsp;SELECT&nbsp;*&nbsp;FROM&nbsp;zzprm_t003<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;INTO&nbsp;IT_MARA<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;permformno&nbsp;IN&nbsp;S_MATNR.<br />
*ENDSELECT.<br />
*ENDFORM.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;GET_DATA<br />
**&---------------------------------------------------------------------*<br />
**&&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Form&nbsp;&nbsp;DISP_ALV<br />
**&---------------------------------------------------------------------*<br />
**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text<br />
**----------------------------------------------------------------------*<br />
**&nbsp;&nbsp;--&gt;&nbsp;&nbsp;p1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text<br />
**&nbsp;&nbsp;&lt;--&nbsp;&nbsp;p2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text<br />
**----------------------------------------------------------------------*<br />
*FORM&nbsp;DISP_ALV&nbsp;.<br />
**PERFORM&nbsp;user_command.<br />
*&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'REUSE_ALV_GRID_DISPLAY'<br />
*&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I_CALLBACK_PROGRAM&nbsp;=&nbsp;SY-REPID<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i_callback_pf_status_set&nbsp;=&nbsp;'SUB_PF_STATUS'<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i_callback_user_command&nbsp;=&nbsp;'USER_COMMAND'<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IT_FIELDCAT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;IT_FCAT&nbsp;"PASS&nbsp;FIELD&nbsp;CATALOG&nbsp;TO&nbsp;ALV<br />
**&nbsp;&nbsp;&nbsp;&nbsp;TABLES<br />
**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T_OUTTAB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;IT_MARA.<br />
*.<br />
*<br />
*ENDFORM.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;DISP_ALV<br />
**&---------------------------------------------------------------------*<br />
**&&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Form&nbsp;&nbsp;CREATE_FCAT<br />
**&---------------------------------------------------------------------*<br />
**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text<br />
**----------------------------------------------------------------------*<br />
**&nbsp;&nbsp;--&gt;&nbsp;&nbsp;p1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text<br />
**&nbsp;&nbsp;&lt;--&nbsp;&nbsp;p2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text<br />
**----------------------------------------------------------------------*<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;CREATE_FCAT<br />
**&---------------------------------------------------------------------*<br />
**&&nbsp;Form&nbsp;user_command<br />
**&---------------------------------------------------------------------*<br />
**&&nbsp;text<br />
**&---------------------------------------------------------------------*<br />
**&&nbsp;--&gt;&nbsp;&nbsp;p1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text<br />
**&&nbsp;&lt;--&nbsp;&nbsp;p2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text<br />
**&---------------------------------------------------------------------*<br />
*form&nbsp;sub_pf_status&nbsp;using&nbsp;rt_extab&nbsp;type&nbsp;slis_t_extab.<br />
*&nbsp;&nbsp;set&nbsp;PF-STATUS&nbsp;'ZSTANDARD'.<br />
*&nbsp;&nbsp;endform.<br />
*<br />
*<br />
**form&nbsp;user_command&nbsp;using<br />
**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r_ucomm&nbsp;like&nbsp;sy-ucomm<br />
**&nbsp;&nbsp;rs_selfield&nbsp;type&nbsp;slis_selfield.<br />
**&nbsp;&nbsp;data&nbsp;lv_mes&nbsp;type&nbsp;char200.<br />
**&nbsp;&nbsp;if&nbsp;r_ucomm&nbsp;eq&nbsp;'&ZZZ'.<br />
**&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'Deneme&nbsp;butonuna&nbsp;týklandý'&nbsp;type&nbsp;'S'.<br />
**&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
**<br />
**&nbsp;&nbsp;case&nbsp;r_ucomm.<br />
**&nbsp;&nbsp;&nbsp;&nbsp;when&nbsp;'&MSG'.<br />
**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'Mesaj&nbsp;bas&nbsp;butonuna&nbsp;basýldý'&nbsp;type&nbsp;'I'.<br />
**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when&nbsp;'&IC1'.<br />
**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;rs_selfield-fieldname.<br />
**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when&nbsp;'MTART'.<br />
**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CONCATENATE&nbsp;rs_selfield-value<br />
**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'materyali&nbsp;týklanmýþtýr'<br />
**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;into&nbsp;lv_mes<br />
**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;separated&nbsp;by&nbsp;space.<br />
**&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;lv_mes&nbsp;type&nbsp;'I'.<br />
**&nbsp;&nbsp;&nbsp;endcase.<br />
**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ENDCASE.<br />
**ENDFORM.<br />
<br />
<br />
*Messages<br />
*----------------------------------------------------------<br />
*<br />
*&nbsp;Message&nbsp;class:&nbsp;Hard&nbsp;coded<br />
*&nbsp;&nbsp;&nbsp;Ýzin&nbsp;talebiniz&nbsp;yönetici&nbsp;onayýnda!<br />
            </div>
          </td>
        </tr>
      </table>
      </td>
      </tr>
